<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Macroeconomic Researcher Dashboard</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>


    <div class="dashboard">
        <!-- Sidebar -->
        <div class="sidebar"  id="sidebar">
            <div class="logo">Logo</div>
            <h2>Macroeconomic (USD)</h2>
            <ul>
                <li draggable="true" ondragstart="drag(event)" id="gdp">GDP (USD)</li>
                <li draggable="true" ondragstart="drag(event)" id="fdi-inflows">FDI Inflows (USD)</li>
                <li draggable="true" ondragstart="drag(event)" id="fdi-outflows">FDI Outflows (USD)</li>
            </ul>
            <h2>Agricultural</h2>
            <ul>
                <li draggable="true" ondragstart="drag(event)" id="agri-contribution">Contribution of Agri (% GDP)</li>
                <li draggable="true" ondragstart="drag(event)" id="credit">Credit</li>
                <li draggable="true" ondragstart="drag(event)" id="fertilizers">Fertilizers</li>
                <li draggable="true" ondragstart="drag(event)" id="fertilizers-prod">Fertilizers PROD</li>
            </ul>
            <h2>Debt Services</h2>
            <ul>
                <li draggable="true" ondragstart="drag(event)" id="reservers">Reservers</li>
                <li draggable="true" ondragstart="drag(event)" id="gni">GNI</li>
                <li draggable="true" ondragstart="drag(event)" id="total-debts">Total Debts (%)</li>
            </ul>

            <button class="import-export" id="importExportButton">Import-Export</button>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <header>
                <div class="title">Macroeconomic Researcher Food Security Time Series and Large Language Chat GPT Dashboard</div>
                <select id="country-selector" onchange="updateCountry()">
                    <option value="">Select Country</option>
                    <option value="China">China</option>
                    <option value="India">India</option>
                    <option value="USA">USA</option>
                </select>
                <img id="country-flag" src="" alt="Country Flag" style="width: 40px; height: 25px; display: none;">
            </header>
           
            <div id="time-series-graph-container">
                <!-- Time Slider and Play Button -->
                <div class="time-slider-container">
                    <label for="time-slider">Years</label>
                    <input type="range" id="time-slider" min="1990" max="2024" step="1" value="1990">
                    <button class="play-button" onclick="togglePlay()">▶️</button>
                </div>

                <!-- Chart Drop Area -->
                <div class="charts" id="chart-drop-area" ondrop="drop(event)" ondragover="allowDrop(event)">
                    Time Series Chart
                </div>

            <!-- Chart Drop Area -->
            <div class="charts" id="chart-drop-area" ondrop="drop(event)" ondragover="allowDrop(event)">
                
            </div>

               <!-- Insert Chat Interface here -->
            <div class="chat-icon" onclick="toggleChat()">
                <img src="./Images/gpt.png" width="30" height="30" alt="GPT Icon">
            </div>

            <div class="chat-modal" id="chatModal">
                <div class="modal-header">
                    <h3>FAO Q&A Assistant</h3>
                    <button class="close-btn" onclick="toggleChat()">X</button>
                </div>
                <div class="chat-box" id="chat-box"></div>
                <div class="chat-input">
                    <input type="text" id="user-input" placeholder="Type your message..." onkeypress="handleKeyPress(event)">
                    <button class="send-btn" onclick="askQuestion()">></button>
                </div>
            </div>
           
                <!-- Annotation Dropdown -->
                <div class="annotation-dropdown">
                    <!-- Annotation Button -->
                    <button class="annotation-button" onclick="toggleDropdown()">Annotation</button>
                    
                    <!-- Dropdown Options -->
                    <div id="dropdownOptions" class="dropdown-content" style="display: none;">
                        <label for="category">Select Category:</label>
                        <select id="category" onchange="populateSubsets()">
                            <option value="">Choose a category</option>
                            <option value="Macroeconomic">Macroeconomic (USD)</option>
                            <option value="Agricultural">Agricultural</option>
                            <option value="Debt Services">Debt Services</option>
                        </select>
                
                        <label for="subset">Select Subset:</label>
                        <select id="subset">
                            <option value="">Choose a subset</option>
                        </select>
                
                        <label for="comment">Comment:</label>
                        <textarea id="comment" placeholder="Write your comment here"></textarea>
                
                        <button id = "SubmitAnnotation" type="button" onclick="submitAnnotation()">Submit</button>
                    </div>
                </div>
            </div>
            
            <div id="sankey-chart-container">
                <label for="two-country-selector">Select Country:</label>
                <select id="two-country-selector">
                    <option value="">Select Country</option>
                    <option value="Egypt">Egypt</option>
                    <option value="Saudi Arabia">Saudi Arabia</option>
                </select>
                
                <label for="year-selector">Select Year:</label>
                <select id="year-selector">
                    <option value="">Select Year</option>
                    <!-- Populate with available years dynamically or add manually -->
                    <option value="2020">2020</option>
                    <option value="2021">2021</option>
                    <option value="2022">2022</option>
                </select>
                
                <label for="crop-selector">Select Crop:</label>
                <select id="crop-selector">
                    <option value="">Select Crop</option>
                    <option value="Wheat">Wheat</option>
                    <option value="Maize (corn)">Maize (corn)</option>
                    <option value="Rice, milled">Rice</option>
                    <!-- Add more crop options as needed -->
                </select>
                <div id="import-export-container">
                    <div id="sankey-chart"></div>
                    <div id="pie-chart"></div>
                </div>
            </div>
            

            <!-- GPT Icon -->
            <img id= "gptIcon" src="Images/gpt .png" alt="GPT Icon">

                <!-- Comments Display Area -->
            <div id="comments" class="comments-section">
                <strong>Comments:</strong>
                <!-- Comments will be dynamically inserted here -->
            </div>
            
        </div>

        <!-- Footer -->
        <footer>
            <div class="footer-content">
                Footer  
             
            </div>
        </footer>
    </div>
    

    <script src="script.js"></script>

</body>
</html>
